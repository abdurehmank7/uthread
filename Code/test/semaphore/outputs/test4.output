Thread 1 trying to acquire semaphore
Thread 1 acquired semaphore
Value of test_val: 1 in thread 1
Thread 2 trying to acquire semaphore
Thread 2 acquired semaphore
Value of test_val: 2 in thread 2
Thread 3 trying to acquire semaphore
Thread 1 released semaphore
Value of test_val: 2 in thread 1
Thread 2 released semaphore
Value of test_val: 2 in thread 2
Thread 3 acquired semaphore
Value of test_val: 3 in thread 3
Thread 3 released semaphore
Value of test_val: 3 in thread 3
Main thread exiting
